
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
        <meta
            name="description"
            content="Document for Phillip Pay"
        >
    <title>Phillip Pay</title>

    <style media="screen">
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .ch, .highlight .cd, .highlight .cpf {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s, .highlight .sa, .highlight .dl {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf, .highlight .fm {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv, .highlight .vm {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .nl {
  color: #f92672;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <style media="print">
      * {
        -webkit-transition:none!important;
        transition:none!important;
      }
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight, .highlight .w {
  color: #586e75;
}
.highlight .err {
  color: #002b36;
  background-color: #dc322f;
}
.highlight .c, .highlight .ch, .highlight .cd, .highlight .cm, .highlight .cpf, .highlight .c1, .highlight .cs {
  color: #657b83;
}
.highlight .cp {
  color: #b58900;
}
.highlight .nt {
  color: #b58900;
}
.highlight .o, .highlight .ow {
  color: #93a1a1;
}
.highlight .p, .highlight .pi {
  color: #93a1a1;
}
.highlight .gi {
  color: #859900;
}
.highlight .gd {
  color: #dc322f;
}
.highlight .gh {
  color: #268bd2;
  background-color: #002b36;
  font-weight: bold;
}
.highlight .k, .highlight .kn, .highlight .kp, .highlight .kr, .highlight .kv {
  color: #6c71c4;
}
.highlight .kc {
  color: #cb4b16;
}
.highlight .kt {
  color: #cb4b16;
}
.highlight .kd {
  color: #cb4b16;
}
.highlight .s, .highlight .sb, .highlight .sc, .highlight .dl, .highlight .sd, .highlight .s2, .highlight .sh, .highlight .sx, .highlight .s1 {
  color: #859900;
}
.highlight .sa {
  color: #6c71c4;
}
.highlight .sr {
  color: #2aa198;
}
.highlight .si {
  color: #d33682;
}
.highlight .se {
  color: #d33682;
}
.highlight .nn {
  color: #b58900;
}
.highlight .nc {
  color: #b58900;
}
.highlight .no {
  color: #b58900;
}
.highlight .na {
  color: #268bd2;
}
.highlight .m, .highlight .mb, .highlight .mf, .highlight .mh, .highlight .mi, .highlight .il, .highlight .mo, .highlight .mx {
  color: #859900;
}
.highlight .ss {
  color: #859900;
}
    </style>
    <link href="stylesheets/screen-443d031e.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print-953e3353.css" rel="stylesheet" media="print" />
      <script src="javascripts/all-b12a2749.js"></script>

    <script>
      $(function() { setupCodeCopy(); });
    </script>
  </head>

  <body class="index" data-languages="[&quot;PHP&quot;,&quot;Java&quot;,&quot;JavaScript&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar-cad8cdcb.png" alt="" />
      </span>
    </a>
    <div class="toc-wrapper">
      <img src="images/logo-7f560041.png" class="logo" alt="" />
        <div class="lang-selector">
              <a href="#" data-language-name="PHP">PHP</a>
              <a href="#" data-language-name="Java">Java</a>
              <a href="#" data-language-name="JavaScript">JavaScript</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <ul id="toc" class="toc-list-h1">
          <li>
            <a href="#introduction" class="toc-h1 toc-link" data-title="Introduction">Introduction</a>
          </li>
          <li>
            <a href="#mobile-payment" class="toc-h1 toc-link" data-title="Mobile Payment">Mobile Payment</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#authentication" class="toc-h2 toc-link" data-title="Authentication">Authentication</a>
                  </li>
                  <li>
                    <a href="#initiate-payment" class="toc-h2 toc-link" data-title="Initiate Payment">Initiate Payment</a>
                  </li>
                  <li>
                    <a href="#check-payment" class="toc-h2 toc-link" data-title="Check Payment">Check Payment</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#card-payment" class="toc-h1 toc-link" data-title="Card Payment">Card Payment</a>
          </li>
          <li>
            <a href="#open-api-psd2" class="toc-h1 toc-link" data-title="Open API (PSD2)">Open API (PSD2)</a>
          </li>
          <li>
            <a href="#errors" class="toc-h1 toc-link" data-title="Errors">Errors</a>
          </li>
      </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='introduction'>Introduction</h1>
<p>Welcome to the Phillip Pay! </p>

<p>With our sandbox environment, you can integrate your system to PhillipBank&#39;s payment gateway and test to make payment from Phillip Mobile to testing account. This is the sandbox environment so the transaction will only reflection in testing environment. You can mimic the whole customer journey from start to success with online payment.</p>

<p>We have language bindings in PHP, Java, and JavaScript!</p>
<h1 id='mobile-payment'>Mobile Payment</h1><h2 id='authentication'>Authentication</h2>
<blockquote>
<p>To generate the access token, use this code:</p>
</blockquote>
<div class="highlight"><pre class="highlight php tab-php"><code><span class="nv">$curl</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">();</span>
<span class="nb">curl_setopt_array</span><span class="p">(</span><span class="nv">$curl</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
  <span class="no">CURLOPT_URL</span> <span class="o">=&gt;</span> <span class="nv">$url</span><span class="p">,</span>
  <span class="no">CURLOPT_RETURNTRANSFER</span> <span class="o">=&gt;</span> <span class="kc">true</span><span class="p">,</span>
  <span class="no">CURLOPT_CUSTOMREQUEST</span> <span class="o">=&gt;</span> <span class="s1">'POST'</span><span class="p">,</span>
  <span class="no">CURLOPT_POSTFIELDS</span> <span class="o">=&gt;</span><span class="s1">'{
    "grant_type" : "client_credentials",
      "client_id"  : "9501d6df-d0c3-4f33-8bf1-eee5cc7a486e",
      "client_secret" : "59Pr4UuXwkfZX7QDVOh143Vq3UEEmplEEPvJmT2T",
      "scope" : "txn-create"
}'</span><span class="p">));</span>
<span class="nv">$response</span> <span class="o">=</span> <span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$curl</span><span class="p">);</span>
<span class="nb">curl_close</span><span class="p">(</span><span class="nv">$curl</span><span class="p">);</span>
<span class="k">echo</span> <span class="nv">$response</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="nc">HttpClient</span> <span class="n">httpClient</span> <span class="o">=</span> <span class="nc">HttpClientBuilder</span><span class="o">.</span><span class="na">create</span><span class="o">().</span><span class="na">build</span><span class="o">();</span>
<span class="nc">HttpPost</span> <span class="n">post</span>  <span class="o">=</span> <span class="k">new</span> <span class="nc">HttpPost</span><span class="o">(</span><span class="n">postUrl</span><span class="o">);</span>
<span class="nc">StringEntity</span> <span class="n">postingString</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">StringEntity</span><span class="o">(</span><span class="n">gson</span><span class="o">.</span><span class="na">toJson</span><span class="o">(</span><span class="n">pojo1</span><span class="o">));</span>
<span class="n">post</span><span class="o">.</span><span class="na">setEntity</span><span class="o">(</span><span class="s">"{
    \"grant_type\": \"client_credentials\",
    \"client_id\": \"9501d6df-d0c3-4f33-8bf1-eee5cc7a486e\",
    \"client_secret\": \"59Pr4UuXwkfZX7QDVOh143Vq3UEEmplEEPvJmT2T\",
    \"scope\": \"txn-create\"
    }"</span><span class="o">);</span>
<span class="n">post</span><span class="o">.</span><span class="na">setHeader</span><span class="o">(</span><span class="s">"Content-type"</span><span class="o">,</span> <span class="s">"application/json"</span><span class="o">);</span>
<span class="nc">HttpResponse</span>  <span class="n">response</span> <span class="o">=</span> <span class="n">httpClient</span><span class="o">.</span><span class="na">execute</span><span class="o">(</span><span class="n">post</span><span class="o">);</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">myHeaders</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Headers</span><span class="p">();</span>
<span class="nx">myHeaders</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="dl">"</span><span class="s2">Content-Type</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">application/json</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">raw</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span>
  <span class="dl">"</span><span class="s2">grant_type</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">client_credentials</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">client_id</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">9501d6df-d0c3-4f33-8bf1-eee5cc7a486e</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">client_secret</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">59Pr4UuXwkfZX7QDVOh143Vq3UEEmplEEPvJmT2T</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">scope</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">txn-create</span><span class="dl">"</span>
<span class="p">});</span>
<span class="kd">var</span> <span class="nx">requestOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">POST</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="nx">myHeaders</span><span class="p">,</span>
  <span class="na">body</span><span class="p">:</span> <span class="nx">raw</span><span class="p">,</span>
<span class="p">};</span>
<span class="nx">fetch</span><span class="p">(</span><span class="nx">url</span><span class="p">,</span> <span class="nx">requestOptions</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">response</span> <span class="o">=&gt;</span> <span class="nx">response</span><span class="p">.</span><span class="nx">text</span><span class="p">())</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">result</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">))</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">error</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">error</span><span class="dl">'</span><span class="p">,</span> <span class="nx">error</span><span class="p">));</span>
</code></pre></div>
<blockquote>
<p>Above request will return below JSON Object</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"token_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Bearer"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"expires_in"</span><span class="p">:</span><span class="w"> </span><span class="mi">31536000</span><span class="p">,</span><span class="w">
    </span><span class="nl">"access_token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"eyAI14!J2aXrpQ21AO==="</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='http-request'>HTTP Request</h3>
<p><code>POST https://api-uat145.phillipbank.com.kh:8441/oauth/token</code></p>
<h3 id='request-body'>Request Body</h3>
<table>
  <tr>
    <th>Parameter</th>
    <th>Description</th>
  </tr>
  <tr>
    <td>client_id</td>
    <td>an UUID String from bank to partner</td>
  </tr>
  <tr>
    <td>client_secret</td>
    <td>combine this with client_id to get the token</td>
  </tr>
</table>
<h3 id='response'>Response</h3>
<table><thead>
<tr>
<th>Variable</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>token_type</td>
<td>Token type to authorize in request header to <a href="#initiate-payment">Initiate</a> and <a href="#check-payment">Check</a></td>
</tr>
<tr>
<td>expires_in</td>
<td>Expiration of token in Milliseconds</td>
</tr>
<tr>
<td>access_token</td>
<td>Token to authorize in request header to <a href="#initiate-payment">Initiate</a> and <a href="#check-payment">Check</a></td>
</tr>
</tbody></table>
<h2 id='initiate-payment'>Initiate Payment</h2><div class="highlight"><pre class="highlight php tab-php"><code><span class="nv">$curl</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">();</span>
<span class="nb">curl_setopt_array</span><span class="p">(</span><span class="nv">$curl</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span><span class="no">CURLOPT_URL</span> <span class="o">=&gt;</span> <span class="nv">$url</span><span class="p">,</span> <span class="no">CURLOPT_RETURNTRANSFER</span> <span class="o">=&gt;</span> <span class="kc">true</span><span class="p">,</span><span class="no">CURLOPT_CUSTOMREQUEST</span> <span class="o">=&gt;</span> <span class="s1">'POST'</span><span class="p">,</span>
  <span class="no">CURLOPT_POSTFIELDS</span> <span class="o">=&gt;</span><span class="s1">'{
    "partner_id": "sanbox",
    "merchant_id": "12345",
    "merchant_name": "Sandbox Merchant",
    "merchant_city": "Phnom Penh",
    "merchant_category": "5814",
    "merchant_rdn": "example.com",
    "phone": "012345678",
    "payload": "Item1, Item2,",
    "txn_id": "INV_82091-9001",
    "label": "Invoice No",
    "currency": "USD",
    "amount": 10.75, 
    "fee": 0.0,
    "country_code": "KH",
    "success_redirect": "https://www.example.com/redirect_payment_sucess",
    "fail_redirect": "https://example.com/redirect_payment_fail"
}'</span><span class="p">,</span>
  <span class="no">CURLOPT_HTTPHEADER</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">'Authorization: Bearer eyAI14!J2aXrpQ21AO==='</span><span class="p">,</span><span class="s1">'Content-Type: application/json'</span><span class="p">)));</span>
<span class="nv">$response</span> <span class="o">=</span> <span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$curl</span><span class="p">);</span>
<span class="nb">curl_close</span><span class="p">(</span><span class="nv">$curl</span><span class="p">);</span>
<span class="k">echo</span> <span class="nv">$response</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="nc">HttpClient</span> <span class="n">httpClient</span> <span class="o">=</span> <span class="nc">HttpClientBuilder</span><span class="o">.</span><span class="na">create</span><span class="o">().</span><span class="na">build</span><span class="o">();</span>
<span class="nc">HttpPost</span> <span class="n">post</span>  <span class="o">=</span> <span class="k">new</span> <span class="nc">HttpPost</span><span class="o">(</span><span class="n">postUrl</span><span class="o">);</span>
<span class="nc">StringEntity</span> <span class="n">postingString</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">StringEntity</span><span class="o">(</span><span class="n">gson</span><span class="o">.</span><span class="na">toJson</span><span class="o">(</span><span class="n">pojo1</span><span class="o">));</span>
<span class="n">post</span><span class="o">.</span><span class="na">setEntity</span><span class="o">(</span><span class="s">"{
  \"partner_id\": \"sanbox\",
  \"merchant_id\": \"12345\",
  \"merchant_name\": \"Sandbox Merchant\",
  \"merchant_city\": \"Phnom Penh\",
  \"merchant_category\": \"5814\",
  \"merchant_rdn\": \"example.com\",
  \"phone\": \"012345678\",
  \"payload\": \"Item1, Item2,\",
  \"txn_id\": \"INV_82091-9001\",
  \"label\": \"Invoice No\",
  \"currency\": \"USD\",
  \"amount\": 10.75, 
  \"fee\": 0.0,
  \"country_code\": \"KH\",
  \"success_redirect\": \"https://www.example.com/redirect_payment_sucess\",
  \"fail_redirect\": \"https://example.com/redirect_payment_fail\"\r\n}"</span><span class="o">);</span>
<span class="n">post</span><span class="o">.</span><span class="na">setHeader</span><span class="o">(</span><span class="s">"Content-type"</span><span class="o">,</span> <span class="s">"application/json"</span><span class="o">);</span>
<span class="n">post</span><span class="o">.</span><span class="na">setHeader</span><span class="o">(</span><span class="s">"Authorization"</span><span class="o">,</span> <span class="s">"Bearer eyAI14!J2aXrpQ21AO==="</span><span class="o">);</span>
<span class="nc">HttpResponse</span>  <span class="n">response</span> <span class="o">=</span> <span class="n">httpClient</span><span class="o">.</span><span class="na">execute</span><span class="o">(</span><span class="n">post</span><span class="o">);</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">myHeaders</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Headers</span><span class="p">();</span>
<span class="nx">myHeaders</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="dl">"</span><span class="s2">Authorization</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">Bearer eyAI14!J2aXrpQ21AO===</span><span class="dl">"</span><span class="p">);</span>
<span class="nx">myHeaders</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="dl">"</span><span class="s2">Content-Type</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">application/json</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">raw</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span>
  <span class="dl">"</span><span class="s2">partner_id</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">sanbox</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">merchant_id</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">12345</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">merchant_name</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Sandbox Merchant</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">merchant_city</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Phnom Penh</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">merchant_category</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">5814</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">merchant_rdn</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">example.com</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">phone</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">012345678</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">payload</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Item1, Item2,</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">txn_id</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">INV_82091-9001</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">label</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Invoice No</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">currency</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">USD</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">amount</span><span class="dl">"</span><span class="p">:</span> <span class="mf">10.75</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">fee</span><span class="dl">"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">country_code</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">KH</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">success_redirect</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">https://www.example.com/redirect_payment_sucess</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">fail_redirect</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">https://example.com/redirect_payment_fail</span><span class="dl">"</span>
<span class="p">});</span>
<span class="kd">var</span> <span class="nx">requestOptions</span> <span class="o">=</span> <span class="p">{</span> <span class="na">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">POST</span><span class="dl">'</span><span class="p">,</span> <span class="na">headers</span><span class="p">:</span> <span class="nx">myHeaders</span><span class="p">,</span> <span class="na">body</span><span class="p">:</span> <span class="nx">raw</span> <span class="p">};</span>
<span class="nx">fetch</span><span class="p">(</span><span class="nx">url</span><span class="p">,</span> <span class="nx">requestOptions</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">response</span> <span class="o">=&gt;</span> <span class="nx">response</span><span class="p">.</span><span class="nx">text</span><span class="p">())</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">result</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">))</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">error</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">error</span><span class="dl">'</span><span class="p">,</span> <span class="nx">error</span><span class="p">));</span>
</code></pre></div>
<blockquote>
<p>Above request will return below JSON Object</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
</span><span class="err">    </span><span class="nl">"success"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
</span><span class="err">    </span><span class="nl">"message"</span><span class="p">:</span><span class="err"> </span><span class="s2">"Transaction created successfully"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"txn_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"INV_82091-9002"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"url"</span><span class="p">:</span><span class="s2">"https://api-uat145.phillipbank.com.kh:8441/pay?token=123"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='http-request-2'>HTTP Request</h3>
<p><code>POST https://api-uat145.phillipbank.com.kh:8441/oauth/token</code></p>
<h3 id='request-header'>Request Header</h3>
<table><thead>
<tr>
<th>Field</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>Authorization</td>
<td>Yes</td>
<td>Authorized from <a href="#authentication">Authenticate</a></td>
</tr>
</tbody></table>
<h3 id='request-body-2'>Request Body</h3>
<table>
  <tr>
    <th>Variable</th>
    <th>Description</th>
  </tr>
  <tr>
    <td>partner_id</td>
    <td>An integration partner ID provided by the bank</td>
  </tr>
  <tr>
    <td>merchant_id</td>
    <td>Merchant ID registered at the bank</td>
  </tr>
  <tr>
    <td>merchant_name</td>
    <td>Name to show in Transaction</td>
  </tr>
  <tr>
    <td>merchant_city</td>
    <td>City of trx of operating merchant</td>
  </tr>
  <tr>
    <td>merchant_category</td>
    <td>Merchant Category standard EMV</td>
  </tr>
  <tr>
    <td>merchant_rdn</td>
    <td>Merchant website, social media page...</td>
  </tr>
  <tr>
    <td>phone</td>
    <td>Merchant or merchant's outlet phone number</td>
  </tr>
  <tr>
    <td>payload</td>
    <td>Merchant item list</td>
  </tr>
  <tr>
    <td>txn_id</td>
    <td>The Unique transaction ID  between Partner and PhillipBank.</td>
  </tr>
  <tr>
    <td>label</td>
    <td>Label by merchant to show txn_id as</td>
  </tr>
  <tr>
    <td>currency</td>
    <td>Payment currency either USD or KHR</td>
  </tr>
  <tr>
    <td>amount</td>
    <td>Payment Amount</td>
  </tr>
  <tr>
    <td>fee</td>
    <td>For showing purpose at merhcant only</td>
  </tr>
  <tr>
    <td>country_code</td>
    <td>ISO standard country code only KH</td>
  </tr>
  <tr>
    <td>success_redirect</td>
    <td>Redirect URL upon payment success at PLB</td>
  </tr>
  <tr>
    <td>fail_redirect</td>
    <td>Redirect URL upon payment failed at PLB</td>
  </tr>
</table>
<h3 id='response-2'>Response</h3>
<table>
  <tr>
    <th>Variable</th>
    <th>Description</th>
  </tr>
  <tr>
    <td>txn_id</td>
    <td>The transaction ID initiated by the partner stored at bank side.</td>
  </tr>
  <tr>
    <td>url</td>
    <td>The URL to create payment request and complete the payment.</td>
  </tr>
</table>

<aside class="success">
Open URL within a webview (within application) or device browser (external) to complete the transaction with Phillip Mobile.

This endpoint will create a request for payment from customer at Phillip Pay system.

Complete the payment by scanning QR or deeplinking with Phillip Mobile.
</aside>
<h2 id='check-payment'>Check Payment</h2><div class="highlight"><pre class="highlight php tab-php"><code><span class="nv">$curl</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">();</span>
<span class="nb">curl_setopt_array</span><span class="p">(</span><span class="nv">$curl</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
  <span class="no">CURLOPT_URL</span> <span class="o">=&gt;</span> <span class="nv">$url</span><span class="p">,</span>
  <span class="no">CURLOPT_RETURNTRANSFER</span> <span class="o">=&gt;</span> <span class="kc">true</span><span class="p">,</span>
  <span class="no">CURLOPT_ENCODING</span> <span class="o">=&gt;</span> <span class="s1">''</span><span class="p">,</span>
  <span class="no">CURLOPT_MAXREDIRS</span> <span class="o">=&gt;</span> <span class="mi">10</span><span class="p">,</span>
  <span class="no">CURLOPT_TIMEOUT</span> <span class="o">=&gt;</span> <span class="mi">0</span><span class="p">,</span>
  <span class="no">CURLOPT_FOLLOWLOCATION</span> <span class="o">=&gt;</span> <span class="kc">true</span><span class="p">,</span>
  <span class="no">CURLOPT_HTTP_VERSION</span> <span class="o">=&gt;</span> <span class="no">CURL_HTTP_VERSION_1_1</span><span class="p">,</span>
  <span class="no">CURLOPT_CUSTOMREQUEST</span> <span class="o">=&gt;</span> <span class="s1">'POST'</span><span class="p">,</span>
  <span class="no">CURLOPT_POSTFIELDS</span> <span class="o">=&gt;</span><span class="s1">'{
    "merchant_id": "12345",
    "txn_id": "INV_82091-9001"
    }'</span><span class="p">,</span>
  <span class="no">CURLOPT_HTTPHEADER</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'Authorization: Bearer eyAI14!J2aXrpQ21AO==='</span><span class="p">,</span>
    <span class="s1">'Content-Type: application/json'</span>
  <span class="p">),</span>
<span class="p">));</span>
<span class="nv">$response</span> <span class="o">=</span> <span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$curl</span><span class="p">);</span>
<span class="nb">curl_close</span><span class="p">(</span><span class="nv">$curl</span><span class="p">);</span>
<span class="k">echo</span> <span class="nv">$response</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="nc">HttpClient</span> <span class="n">httpClient</span> <span class="o">=</span> <span class="nc">HttpClientBuilder</span><span class="o">.</span><span class="na">create</span><span class="o">().</span><span class="na">build</span><span class="o">();</span>
<span class="nc">HttpPost</span> <span class="n">post</span>  <span class="o">=</span> <span class="k">new</span> <span class="nc">HttpPost</span><span class="o">(</span><span class="n">postUrl</span><span class="o">);</span>
<span class="nc">StringEntity</span> <span class="n">postingString</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">StringEntity</span><span class="o">(</span><span class="n">gson</span><span class="o">.</span><span class="na">toJson</span><span class="o">(</span><span class="n">pojo1</span><span class="o">));</span>
<span class="n">post</span><span class="o">.</span><span class="na">setEntity</span><span class="o">(</span><span class="s">"{
  \"merchant_id\": \"12345\",
  \"txn_id\": \"INV_82091-9001\"
  }"</span><span class="o">);</span>
<span class="n">post</span><span class="o">.</span><span class="na">setHeader</span><span class="o">(</span><span class="s">"Content-type"</span><span class="o">,</span> <span class="s">"application/json"</span><span class="o">);</span>
<span class="n">post</span><span class="o">.</span><span class="na">setHeader</span><span class="o">(</span><span class="s">"Authorization"</span><span class="o">,</span> <span class="s">"Bearer eyAI14!J2aXrpQ21AO==="</span><span class="o">);</span>
<span class="nc">HttpResponse</span>  <span class="n">response</span> <span class="o">=</span> <span class="n">httpClient</span><span class="o">.</span><span class="na">execute</span><span class="o">(</span><span class="n">post</span><span class="o">);</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">myHeaders</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Headers</span><span class="p">();</span>
<span class="nx">myHeaders</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="dl">"</span><span class="s2">Authorization</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">Bearer eyAI14!J2aXrpQ21AO===</span><span class="dl">"</span><span class="p">);</span>
<span class="nx">myHeaders</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="dl">"</span><span class="s2">Content-Type</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">application/json</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">raw</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span>
  <span class="dl">"</span><span class="s2">merchant_id</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">12345</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">txn_id</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">INV_82091-9001</span><span class="dl">"</span>
<span class="p">});</span>
<span class="kd">var</span> <span class="nx">requestOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">POST</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="nx">myHeaders</span><span class="p">,</span>
  <span class="na">body</span><span class="p">:</span> <span class="nx">raw</span><span class="p">,</span>
<span class="p">};</span>

<span class="nx">fetch</span><span class="p">(</span><span class="dl">"</span><span class="s2">https://api-uat145.phillipbank.com.kh:8441/api/check/transaction</span><span class="dl">"</span><span class="p">,</span> <span class="nx">requestOptions</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">response</span> <span class="o">=&gt;</span> <span class="nx">response</span><span class="p">.</span><span class="nx">text</span><span class="p">())</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">result</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">))</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">error</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">error</span><span class="dl">'</span><span class="p">,</span> <span class="nx">error</span><span class="p">));</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"success"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Transaction status retrieved successfully"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"txn_status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PENDING"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='http-request-3'>HTTP Request</h3>
<p><code>POST https://api-uat145.phillipbank.com.kh:8441/api/check/transaction</code></p>
<h3 id='request-body-3'>Request Body</h3>
<table>
  <tr>
    <th>Variable</th>
    <th>Description</th>
  </tr>
  <tr>
    <td>merchant_id</td>
    <td>Merchant ID registered at the bank.</td>
  </tr>
  <tr>
    <td>txn_id</td>
    <td>The Transaction ID  between Partner and PhillipBank.</td>
  </tr>
</table>
<h3 id='reponse'>Reponse</h3>
<table>
  <tr>
    <th>Variable</th>
    <th>Description</th>
  </tr>
  <tr>
    <td>txn_status</td>
    <td>Status of payment, it can be SUCCESS, PENDING, and FAILED.</td>
  </tr>
</table>
<h1 id='card-payment'>Card Payment</h1>
<p>Coming Soon!</p>
<h1 id='open-api-psd2'>Open API (PSD2)</h1>
<p>Coming Soon!</p>
<h1 id='errors'>Errors</h1>
<p>The Phillip Pay uses the following error codes:</p>

<table><thead>
<tr>
<th>Error Code</th>
<th>Meaning</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>Bad Request -- The txn id has already been taken..</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized -- Bearer token is wrong or expired.</td>
</tr>
<tr>
<td>404</td>
<td>Not Found -- The specified txn id could not be found.</td>
</tr>
<tr>
<td>500</td>
<td>Internal Server Error -- We had a problem with our server. Try again later.</td>
</tr>
</tbody></table>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="PHP">PHP</a>
                <a href="#" data-language-name="Java">Java</a>
                <a href="#" data-language-name="JavaScript">JavaScript</a>
          </div>
      </div>
    </div>
  </body>
</html>
